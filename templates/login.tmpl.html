{{ define "content" }}

  <div id="content"></div>

  <script type="text/babel">
    var Input = ReactBootstrap.Input;
    var Login = React.createClass({
      getInitialState() {
        return {
          emailText: '',
          passwordText: ''
        };
      },
      validationState() {
        let email = this.state.emailText;
        if (email.length < 3) return;
        let re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        let match = re.test(email);
        if (match) return 'success';
        return 'warning';
      },
      handleChange() {
        this.setState({
          emailText: this.refs.email.getValue(),
          passwordText: this.refs.password.getValue()
        });
      },
      render: function() {
        return (
          <div>
            <Input
              type="text"
              value={this.state.emailText}
              placeholder="Email"
              label="Email"
              help="Your Instapaper Account Email Address."
              bsStyle={this.validationState()}
              hasFeedback
              ref="email"
              groupClassName="group-class"
              labelClassName="label-class"
              onChange={this.handleChange} />

            <Input
              type="password"
              value={this.state.passwordText}
              placeholder="Password"
              label="Pasword"
              help="Your Instapaper Account Password."
              hasFeedback
              ref="password"
              groupClassName="group-class"
              labelClassName="label-class"
              onChange={this.handleChange} />
          </div>
        );
      }
    });

    ReactDOM.render(<Login />, document.getElementById('content'));
  </script>

{{ end }}
