{{ define "content" }}

  <script src="https://cdnjs.cloudflare.com/ajax/libs/superagent/1.2.0/superagent.js"></script>

  <script>
  $(document).ready(function() {
    $("#importing").hide();
    $("#success").hide();
    $("#error").hide();
    $("#login").show();

    $("#login").click(function() {
      $("#login").hide();
      $("#success").hide();
      $("#error").hide();

      $("#importing").show();

      var username = $('#inputEmail').val();
      var password = $('#inputPassword').val();

      window.superagent
        .post('/import')
        .auth(username, password)
        .end(function(err, res){
          if (err || res.code == 200) {
            $("#error").show();
          } else {
            $("#success").show();
          }
          $("#login").show();
          $("#importing").hide();
        });
    });
  });
  </script>

  <div class="row" style="text-align:center;">
    <div class="col-md-6" style="display:inline-block;float:none;margin-right:-4px;">
      <input type="text" class="form-control" id="inputEmail" placeholder="Email" autocomplete="off">
      <input type="password" class="form-control" id="inputPassword" placeholder="Password" autocomplete="off">
      <p/><p/>

      <div id="login" class="btn btn-primary" role="button"><i class="fa fa-sign-in"></i> Login to Instapaper</div>
      <div id="importing" class="btn btn-warning"><i class="fa fa-circle-o-notch fa-spin"></i> Importing articles</div>

      <div id="error" class="alert alert-dismissible alert-danger">
        <button type="button" class="close" data-dismiss="alert">x</button>
        <strong>Oh snap!</strong> Something went wrong. Change a few things up and try again.
      </div>
      <div id="success" class="alert alert-dismissible alert-success">
        <button type="button" class="close" data-dismiss="alert">x</button>
        <strong>Well done!</strong> We've imported the top HN articles. <a href="https://www.instapaper.com/u" class="alert-link">Happy Reading</a>!
      </div>
    </div>
  </div>
{{ end }}
